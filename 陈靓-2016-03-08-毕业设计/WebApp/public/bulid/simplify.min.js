/*! WebApp 08-03-2016 */
$(function(){$(".scrollable-sidebar").slimScroll({height:"100%",size:"0px"}),$(".sidebar-menu .openable > a").click(function(){return $("aside").hasClass("sidebar-mini")&&!Modernizr.mq("(max-width: 991px)")||($(this).parent().children(".submenu").is(":hidden")?($(this).parent().siblings().removeClass("open").children(".submenu").slideUp(200),$(this).parent().addClass("open").children(".submenu").slideDown(200)):$(this).parent().removeClass("open").children(".submenu").slideUp(200)),!1}),$(".sidebar-menu").hasClass("sidebar-mini")&&!Modernizr.mq("(max-width: 767px)")||$(".openable.open").children(".submenu").slideDown(200),$("#btn-collapse").click(function(){$(".sidebar-header").toggleClass("active")}),$("#theme-setting-icon").click(function(){return $("#theme-setting").hasClass("open")?($("#theme-setting").removeClass("open"),$("#theme-setting-icon").removeClass("open")):($("#theme-setting").addClass("open"),$("#theme-setting-icon").addClass("open")),!1}),$("#sidebarToggleLG").click(function(){$(".wrapper").hasClass("display-right")?($(".wrapper").removeClass("display-right"),$(".sidebar-right").removeClass("active")):($(".top-nav").toggleClass("sidebar-mini"),$("aside").toggleClass("sidebar-mini"),$("footer").toggleClass("sidebar-mini"),$(".main-container").toggleClass("sidebar-mini"),$(".main-menu").find(".openable").removeClass("open"),$(".main-menu").find(".submenu").removeAttr("style"))}),$("#sidebarToggleSM").click(function(){$("aside").toggleClass("active"),$(".wrapper").toggleClass("display-left")}),$(".sidebarRight-toggle").click(function(){return $(".sidebar-right").toggleClass("active"),$(".wrapper").toggleClass("display-right"),$("footer").toggleClass("display-right"),!1}),$(".dropdown-menu input").click(function(a){a.stopPropagation()}),$(".task-finish").click(function(){$(this).is(":checked")?$(this).parent().parent().addClass("selected"):$(this).parent().parent().removeClass("selected")}),$(".task-del").click(function(){var a=$(this).parent().parent();return a.addClass("removed"),setTimeout(function(){a.remove()},1e3),!1});var a="";$(".widget-refresh-option").click(function(){a=$(this).parent().parent().parent();var b=a.find(".refresh-icon-animated").fadeIn();return setTimeout(function(){b.fadeOut()},2e3),!1}),$(".widget-collapse-option").click(function(){a=$(this).parent().parent().parent(),a.find(".smart-widget-inner").slideToggle(),a.toggleClass("smart-widget-collapsed");var b=a.find(".refresh-icon-animated").fadeIn();return setTimeout(function(){b.fadeOut()},500),a="",!1}),$(".widget-toggle-hidden-option").click(function(){a=$(this).parent().parent().parent(),a.find(".smart-widget-hidden-section").slideToggle();var b=a.find(".refresh-icon-animated").fadeIn();return setTimeout(function(){b.fadeOut()},500),a="",!1}),$(".widget-color-list li").click(function(){return a=$(this).parent().parent().parent().parent(),$selectedColor=$(this).data("color"),a.removeClass("widget-light-grey"),a.removeClass("widget-dark"),a.removeClass("widget-dark-blue"),a.removeClass("widget-blue"),a.removeClass("widget-green"),a.removeClass("widget-yellow"),a.removeClass("widget-orange"),a.removeClass("widget-red"),a.removeClass("widget-purple"),"reset"!=$selectedColor&&a.addClass($selectedColor),!1}),$(".widget-remove-option").click(function(){return a=$(this).parent().parent().parent(),$("#deleteWidgetConfirm").popup("show"),!1}),$(".scroll-to-top").click(function(){return $("html, body").animate({scrollTop:0},600),!1}),$("[data-toggle=popover]").popover(),$("[data-toggle=tooltip]").tooltip(),$("[rel=tooltip]").tooltip()}),$(window).load(function(){$("body").removeClass("overflow-hidden"),$(".wrapper").removeClass("preload"),setTimeout(function(){$(".chat-notification").find(".badge").addClass("active"),$(".chat-alert").addClass("active")},3e3),setTimeout(function(){$(".chat-alert").removeClass("active")},8e3)}),$(window).scroll(function(){var a=$(window).scrollTop();a>=200?$(".scroll-to-top").addClass("active"):$(".scroll-to-top").removeClass("active")}),$(function(){$(".chart").easyPieChart({easing:"easeOutBounce",size:"140",lineWidth:"7",barColor:"#7266ba",onStep:function(a,b,c){$(this.el).find(".percent").text(Math.round(c))}}),$(".sortable-list").sortable(),$(".todo-checkbox").click(function(){var a=$(this).find('input[type="checkbox"]');a.is(":checked")?$(this).parent().addClass("selected"):$(this).parent().removeClass("selected")}),$.simpleWeather({location:"beijing",woeid:"",unit:"c",success:function(a){html='<div class="panel panel-default weather-widget"><div class="panel-body bg-success text-white"><div class="h4 text-white text-center">今日天气</div><div class="m-top-md m-bottom-md text-center"> <i id="skycon1" class="icon-'+a.code+'" width="120" height="120"></i> </div><div class="degree-text text-center">'+a.temp+"&deg;"+a.units.temp+"</div>",html+='<div class="panel-footer bg-white text-center padding-md"><div class="h4 text-upper">'+a.city+", "+a.region+'<i class="fa fa-map-marker"></i></div> <div class="text-muted font-12 m-top-xs">'+a.currently+"</div></div></div></div>",$(".md-3").html(html)},error:function(a){$(".md-3").html("<p>"+a+"</p>")}}),$.simpleWeather({location:"guangzhou",woeid:"",unit:"c",success:function(a){html='<div class="panel panel-default weather-widget"><div class="panel-body bg-warning text-white"><div class="h4 text-white text-center">今日天气</div><div class="m-top-md m-bottom-md text-center"> <i id="skycon1" class="icon-'+a.code+'" width="120" height="120"></i> </div><div class="degree-text text-center">'+a.temp+"&deg;"+a.units.temp+"</div>",html+='<div class="panel-footer bg-white text-center padding-md"><div class="h4 text-upper">'+a.city+", "+a.region+'<i class="fa fa-map-marker"></i></div> <div class="text-muted font-12 m-top-xs">'+a.currently+"</div></div></div></div>",$(".md-4").html(html)},error:function(a){$(".md-4").html("<p>"+a+"</p>")}}),$.simpleWeather({location:"shanghai",woeid:"",unit:"c",success:function(a){html='<div class="panel panel-default weather-widget"><div class="panel-body bg-danger text-white"><div class="h4 text-white text-center">今日天气</div><div class="m-top-md m-bottom-md text-center"> <i id="skycon1" class="icon-'+a.code+'" width="120" height="120"></i> </div><div class="degree-text text-center">'+a.temp+"&deg;"+a.units.temp+"</div>",html+='<div class="panel-footer bg-white text-center padding-md"><div class="h4 text-upper">'+a.city+", "+a.region+'<i class="fa fa-map-marker"></i></div> <div class="text-muted font-12 m-top-xs">'+a.currently+"</div></div></div></div>",$(".md-5").html(html)},error:function(a){$(".md-5").html("<p>"+a+"</p>")}}),$.simpleWeather({location:"shenzhen",woeid:"",unit:"c",success:function(a){html='<div class="panel panel-default weather-widget"><div class="panel-body bg-info text-white"><div class="h4 text-white text-center">今日天气</div><div class="m-top-md m-bottom-md text-center"> <i id="skycon1" class="icon-'+a.code+'" width="120" height="120"></i> </div><div class="degree-text text-center">'+a.temp+"&deg;"+a.units.temp+"</div>",html+='<div class="panel-footer bg-white text-center padding-md"><div class="h4 text-upper">'+a.city+", "+a.region+'<i class="fa fa-map-marker"></i></div> <div class="text-muted font-12 m-top-xs">'+a.currently+"</div></div></div></div>",$(".md-6").html(html)},error:function(a){$(".md-6").html("<p>"+a+"</p>")}});var a=remote_ip_info.province,b=remote_ip_info.city;remote_ip_info.district;$(".localction").html(a+" "+b)}),String.prototype.format=function(a){var b=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof a){for(var c in a)if(void 0!=a[c]){var d=new RegExp("({"+c+"})","g");b=b.replace(d,a[c])}}else for(var e=0;e<arguments.length;e++)if(void 0!=arguments[e]){var d=new RegExp("({)"+e+"(})","g");b=b.replace(d,arguments[e])}return b},$(document).ready(function(){$(".login-btn").click(function(){var a=$("#inputEmail3"),b=$.trim(a.val()),c=$("#inputPassword3"),d=$.trim(c.val()),e='<div id="errorTip" class="alert alert-warning">{0}</div> ';if($("#errorTip,#alt_warning").remove(),0==b.length)return $(".log-contant").prepend(e.format("用户名/邮箱不能为空!")),a.focus(),!1;if(!b.match(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/))return $(".log-contant").prepend(e.format("邮箱格式不正确！请重新输入!")),a.focus(),!1;if(0==d.length)return $(".log-contant").prepend(e.format("密码不能为空！")),c.focus(),!1;var f={username:b,userpwd:d};$.ajax({url:"/login",type:"post",data:f,success:function(a,b){"success"==b&&(location.href="main")},error:function(a,b){"error"==b&&(console.log(a,b),location.href="login")}})})}),$(document).ready(function(){function a(){var a=g;g=++g%e,b(a,g)}function b(a,b){$(".bg-item").eq(a).fadeOut(500).parent().children().eq(b).fadeIn(1e3)}function c(){h||(h=!0,f=setInterval(a,i))}function d(){clearInterval(f),h=!1}var e,f,g=0,h=!1,i=3e3;e=$(".bg-item").length,$(".bg-item:not(:first)").hide(),$(".con-img-scroll").hover(function(){d()},function(){c()}),c()}),$(document).ready(function(){function a(){var a=e;e=(--e+d)%d,c(a,e)}function b(){var a=e;e=++e%d,c(a,e)}function c(a,b){$(".Introduction").eq(a).fadeOut(500).parent().children().eq(b).fadeIn(1e3),$(".page-item").removeClass("active"),$(".page-item").eq(b).addClass("active")}var d,e=0;d=$(".Introduction").length,$(".Introduction:not(:first)").hide(),$(".left-arrow").unbind("click"),$(".left-arrow").bind("click",function(){a()}),$(".right-arrow").unbind("click"),$(".right-arrow").bind("click",function(){b()})}),$(function(){$(".select2").select2(),$(".datepicker-input").datetimepicker({format:"yyyy/mm/dd",language:"cn",minView:2,pickTime:!0}),$(".next-btn").on("click",function(){var a=$(".dataname"),b=a.val(),c=$(".dataage"),d=c.val(),e=$(".datawork"),f=e.val(),g=$(".datacompany"),h=g.val(),i=$(".dataemail"),j=i.val(),k=$(".dataphone"),l=k.val(),m=$(".databrithday"),n=m.val(),o=$(".dataself"),p=o.val();if(0==b.length)return a.addClass("error-personal"),$(".error-text1").html("用户名为必填项..."),a.focus(),!1;if(a.removeClass("error-personal"),$(".error-text1").remove(),0==f.length)return e.addClass("error-personal"),$(".error-text2").html("请填写您的职业..."),e.focus(),!1;if(e.removeClass("error-personal"),$(".error-text2").remove(),0==l.length)return k.addClass("error-personal"),$(".error-text4").html("电话必须填写..."),k.focus(),!1;k.removeClass("error-personal"),$(".error-text4").remove();var q={data_name:b,data_age:d,data_work:f,data_company:h,data_email:j,data_phone:l,data_brithday:n,data_self:p};$.ajax({url:"/personal",type:"post",data:q,success:function(a,b){"success"==b&&(location.href="main")},error:function(a,b){"error"==b&&(console.log(a,b),location.href="login")}})})}),String.prototype.format=function(a){var b=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof a){for(var c in a)if(void 0!=a[c]){var d=new RegExp("({"+c+"})","g");b=b.replace(d,a[c])}}else for(var e=0;e<arguments.length;e++)if(void 0!=arguments[e]){var d=new RegExp("({)"+e+"(})","g");b=b.replace(d,arguments[e])}return b},$(function(){$(".register-btn").on("click",function(){var a=$("#inputEmail3"),b=$.trim(a.val()),c=$("#inputPassword3"),d=$.trim(c.val()),e=$("#inputPassword4"),f=$.trim(e.val()),g='<div id="errorTip" class="alert alert-warning">{0}</div> ',h='<div id="alt_sucess" class="alert alert-success">{0}</div> ';if($("#errorTip,#alt_sucess,#alt_warning").remove(),0==b.length)return $(".sign-contant").prepend(g.format("用户名不能为空")),a.focus(),!1;if(0==d.length)return $(".sign-contant").prepend(g.format("密码不能为空")),c.focus(),!1;if(0==f.length)return $(".sign-contant").prepend(g.format("确认密码不能为空")),e.focus(),!1;if(d!=f)return $(".sign-contant").prepend(g.format("两次密码不一致")),c.focus(),!1;var i={username:b,userpwd:d};$.ajax({url:"/register",type:"post",data:i,success:function(a,b){"success"==b&&($("#container").prepend(h.format("注册成功！")),location.href="personal")},error:function(a,b){"error"==b&&(location.href="register")}})})}),$(function(){$(".datepicker-input").datetimepicker({format:"yyyy-mm-dd hh:ii:ss",language:"cn",autoclose:!0,todayBtn:!0,startDate:"2013-02-14 10:00",minuteStep:10})}),String.prototype.format=function(a){var b=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof a){for(var c in a)if(void 0!=a[c]){var d=new RegExp("({"+c+"})","g");b=b.replace(d,a[c])}}else for(var e=0;e<arguments.length;e++)if(void 0!=arguments[e]){var d=new RegExp("({)"+e+"(})","g");b=b.replace(d,arguments[e])}return b},$(document).ready(function(){$(".add-todo").click(function(){var a=$(".todolisttitle"),b=$.trim(a.val()),c=$(".starttime"),d=c.val(),e=$(".endtime"),f=(e.val(),$(".todolistcontent")),g=$.trim(f.val());return $("#errorTip,#alt_warning").remove(),0==b.length?($(".todotitle").addClass("has-error"),a.focus(),!1):(b&&$(".todotitle").removeClass("has-error"),0==d.length?($(".start").addClass("has-error"),c.focus(),!1):(d&&$(".todotitle").removeClass("has-error"),0==g.length?($(".todocontent").addClass("has-error"),f.focus(),!1):void(g&&$(".todocontent").removeClass("has-error"))))})}),$(function(){var a=remote_ip_info.province,b=remote_ip_info.city;remote_ip_info.district;$(".localction").html(a+" "+b),$(".datepicker-input").datetimepicker({format:"yyyy/mm/dd",language:"cn",minView:2,pickTime:!0}),$(".profile-sub").on("click",function(){var a=$(".dataname"),b=a.val(),c=$(".dataage"),d=c.val(),e=$(".datawork"),f=e.val(),g=$(".datacompany"),h=g.val(),i=$(".dataemail"),j=i.val(),k=$(".dataphone"),l=k.val(),m=$(".databrithday"),n=m.val(),o=$(".dataself"),p=o.val(),q='<div id="errorTip" class="alert alert-warning">{0}</div> ';if($("#errorTip,#alt_warning").remove(),0==b.length)return $(".profileTab").prepend(q.format("用户名不能为空!")),a.focus(),!1;if(0==f.length)return $(".profileTab").prepend(q.format("工作不能为空!")),e.focus(),!1;if(0==l.length)return $(".profileTab").prepend(q.format("电话不能为空!")),k.focus(),!1;if(0==j.length)return $(".profileTab").prepend(q.format("邮箱不能为空!")),i.focus(),!1;var r={data_name:b,data_age:d,data_work:f,data_company:h,data_email:j,data_phone:l,data_brithday:n,data_self:p};$.ajax({url:"/profile",type:"post",data:r,success:function(a,b){"success"==b&&(location.href="profile")},error:function(a,b){"error"==b&&(console.log(a,b),alert("更新失败"))}})})}),String.prototype.format=function(a){var b=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof a){for(var c in a)if(void 0!=a[c]){var d=new RegExp("({"+c+"})","g");b=b.replace(d,a[c])}}else for(var e=0;e<arguments.length;e++)if(void 0!=arguments[e]){var d=new RegExp("({)"+e+"(})","g");b=b.replace(d,arguments[e])}return b},$(function(){$("#btnSub").on("click",function(){var a=$("#fulAvatar").val(),b='<div id="errorTip" class="alert alert-warning">{0}</div> ';if($("#errorTip,#alt_warning").remove(),0==a.length)return $("#container").prepend(b.format("请选择要上传的文件")),!1;var c=a.substring(a.lastIndexOf("."),a.length).toLowerCase();return".png"!=c&&".jpg"!=c?($("#container").prepend(b.format("只支持png和jpg格式图片")),!1):!0})});var ue=UE.getEditor("editor");String.prototype.format=function(a){var b=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof a){for(var c in a)if(void 0!=a[c]){var d=new RegExp("({"+c+"})","g");b=b.replace(d,a[c])}}else for(var e=0;e<arguments.length;e++)if(void 0!=arguments[e]){var d=new RegExp("({)"+e+"(})","g");b=b.replace(d,arguments[e])}return b},$(function(){$(".sub-mood").on("click",function(){var a,b=UE.htmlparser(UE.getEditor("editor").getContent(),!0),c=[],c=b.getNodesByTagName("img");for(i=0;c.length>0;i++){a=c[0].getAttr("src");break}var d=UE.getEditor("editor").getPlainTxt(),e=UE.getEditor("editor").hasContents(),f=$(".moodtitle"),g=f.val(),h=$(".moodwrite"),j=h.val(),k=d,l=a,m='<div id="errorTip" class="alert alert-warning">{0}</div> ';if($("#errorTip,#alt_sucess,#alt_warning").remove(),0==g.length)return $(".blog-content").prepend(m.format("请输入文章的标题...")),f.focus(),!1;if(0==e)return $(".blog-content").prepend(m.format("请输入文章内容...")),UE.getEditor("editor").focus(),!1;var n={mood_title:g,mood_img:l,mood_content:k,mood_write:j};$.ajax({url:"/publish_blogs",type:"post",data:n,success:function(a,b){"success"==b&&($("#addWidgetConfirm2").popup("show"),$("#deleteWidgetConfirm").popup("hide"))},error:function(a,b){"error"==b&&(console.log(a,b),alert("添加失败"),location.href="publish_blogs")}})})});